<!DOCTYPE html>
<html>
<head>
    <title>v2.04</title>
    <style>
        .row {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }

        button {
            width: 100px;
            height: 100px;
            margin: 10px;
            border: none;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: Arial, sans-serif;
            font-size: 14px;
            color: white;
            cursor: pointer;
        }

        button.active {
            box-shadow: inset 0px 0px 5px #000;
        }

        .Drums { background-color: green; }
        .Strings { background-color: purple; }
        .Piano { background-color: blue; }
        .Vocals { background-color: orange; }

        button img {
            width: 40px;
            height: 40px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <!-- Drums Row -->
    <div class="row">
        <div>
            <button class="Drums" data-key="1+D">
                <img src="drum.png" alt="Drums Logo">
                Drums
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Drums" data-key="2+D">
                <img src="drum.png" alt="Drums Logo">
                Drums
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Drums" data-key="3+D">
                <img src="drum.png" alt="Drums Logo">
                Drums
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Drums" data-key="4+D">
                <img src="drum.png" alt="Drums Logo">
                Drums
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Drums" data-key="5+D">
                <img src="drum.png" alt="Drums Logo">
                Drums
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
    </div>

    <!-- Strings Row -->
    <div class="row">
        <div>
            <button class="Strings" data-key="1+S">
                <img src="guitar.png" alt="Strings Logo">
                Strings
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Strings" data-key="2+S">
                <img src="guitar.png" alt="Strings Logo">
                Strings
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Strings" data-key="3+S">
                <img src="guitar.png" alt="Strings Logo">
                Strings
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Strings" data-key="4+S">
                <img src="guitar.png" alt="Strings Logo">
                Strings
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Strings" data-key="5+S">
                <img src="guitar.png" alt="Strings Logo">
                Strings
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
    </div>

    <!-- Piano Row -->
    <div class="row">
        <div>
            <button class="Piano" data-key="1+P">
                <img src="piano.png" alt="Piano Logo">
                Piano
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Piano" data-key="2+P">
                <img src="piano.png" alt="Piano Logo">
                Piano
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Piano" data-key="3+P">
                <img src="piano.png" alt="Piano Logo">
                Piano
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Piano" data-key="4+P">
                <img src="piano.png" alt="Piano Logo">
                Piano
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Piano" data-key="5+P">
                <img src="piano.png" alt="Piano Logo">
                Piano
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
    </div>

    <!-- Vocals Row -->
    <div class="row">
        <div>
            <button class="Vocals" data-key="1+V">
                <img src="microphone-alt.png" alt="Vocals Logo">
                Vocals
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Vocals" data-key="2+V">
                <img src="microphone-alt.png" alt="Vocals Logo">
                Vocals
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Vocals" data-key="3+V">
                <img src="microphone-alt.png" alt="Vocals Logo">
                Vocals
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Vocals" data-key="4+V">
                <img src="microphone-alt.png" alt="Vocals Logo">
                Vocals
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
        <div>
            <button class="Vocals" data-key="5+V">
                <img src="microphone-alt.png" alt="Vocals Logo">
                Vocals
            </button>
            <input type="file" accept=".mp3,.wav" class="file-upload">
        </div>
    </div>


    <script>
        // Track currently pressed keys
        const pressedKeys = new Set();

        // Add key to the set on keydown
        document.addEventListener('keydown', (event) => {
            pressedKeys.add(event.key.toUpperCase());
            checkKeyCombination(); // Check pressed keys for a match
        });

        // Remove key from the set on keyup
        document.addEventListener('keyup', (event) => {
            pressedKeys.delete(event.key.toUpperCase());
        });

        // Check key combinations against buttons
        function checkKeyCombination() {
            const keysArray = Array.from(pressedKeys).sort().join('+'); // Combine pressed keys
            console.log('Pressed keys:', keysArray); // Debugging: Check the keys array output
            const button = document.querySelector(`button[data-key="${keysArray}"]`);

            if (button) {
                console.log('Match found for:', keysArray); // Debugging: Confirm match
                button.click(); // Simulate a button click
            }
        }

        // Bind audio files and handle button states
        document.querySelectorAll('.row').forEach((row) => {
            const buttons = row.querySelectorAll('button');
            const fileInputs = row.querySelectorAll('.file-upload');

            buttons.forEach((button, index) => {
                let audio = null;
                let isPlaying = false;

                // Handle file input change
                fileInputs[index].addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        const fileURL = URL.createObjectURL(file);
                        audio = new Audio(fileURL);
                        audio.loop = true; // Enable looping
                    }
                });

                // Handle button click
                button.addEventListener('click', () => {
                    if (!audio) return;

                    if (isPlaying) {
                        audio.pause();
                        audio.currentTime = 0; // Reset audio
                        button.classList.remove('active');
                        isPlaying = false;
                    } else {
                        audio.play();
                        button.classList.add('active');
                        isPlaying = true;
                    }
                });
            });
        });
    </script>
</body>
</html>
